{"id":"sETE","dependencies":[{"name":"/Users/lucascosta/jobs/tray/taitamariki_5.0/package.json","includedInParent":true,"mtime":1578496610234},{"name":"react","loc":{"line":1,"column":44},"parent":"/Users/lucascosta/jobs/tray/taitamariki_5.0/app/components/variants/index.jsx","resolved":"/Users/lucascosta/jobs/tray/taitamariki_5.0/node_modules/react/index.js"},{"name":"react-redux","loc":{"line":2,"column":24},"parent":"/Users/lucascosta/jobs/tray/taitamariki_5.0/app/components/variants/index.jsx","resolved":"/Users/lucascosta/jobs/tray/taitamariki_5.0/node_modules/react-redux/es/index.js"},{"name":"axios","loc":{"line":3,"column":18},"parent":"/Users/lucascosta/jobs/tray/taitamariki_5.0/app/components/variants/index.jsx","resolved":"/Users/lucascosta/jobs/tray/taitamariki_5.0/node_modules/axios/index.js"},{"name":"../../actions","loc":{"line":5,"column":71},"parent":"/Users/lucascosta/jobs/tray/taitamariki_5.0/app/components/variants/index.jsx","resolved":"/Users/lucascosta/jobs/tray/taitamariki_5.0/app/actions/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=l(require(\"react\")),t=require(\"react-redux\"),a=r(require(\"axios\")),n=require(\"../../actions\");function r(e){return e&&e.__esModule?e:{default:e}}function i(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var a={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var l=n?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=e[r]}}return a.default=e,t&&t.set(e,a),a}function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),e}function p(e,t){return!t||\"object\"!==s(t)&&\"function\"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(t){function n(e){var t;return o(this,n),(t=p(this,d(n).call(this,e))).state={variants:[],selected:[],selects:[],type:[],filter:[],product:{price:0,offer:0,payment:\"\",images:[]}},t}return m(n,e.Component),c(n,[{key:\"init\",value:function(e){var t=this,a=e.Variants.map(function(e){var t;return e.Variant.payment_option_details.length&&(t=\"<span>\"+e.Variant.payment_option_details[0].plots+\"x</span> de <span>\"+new Intl.NumberFormat(\"pt-br\",{style:\"currency\",currency:\"BRL\"}).format(e.Variant.payment_option_details[0].value)+\"</span>\"),{id:e.Variant.id,skus:e.Variant.Sku,availabled:1==parseInt(e.Variant.available),price:e.Variant.price,offer:e.Variant.promotional_price,payment:t,images:e.Variant.VariantImage.map(function(e){return e.http.replace(\"http:\",\"\")})}}),n=a.map(function(e){return e.skus.map(function(e){return e.type})}),r=[];n.forEach(function(e){r=r.concat(e)}),n=(n=r).filter(function(e,t,a){return t==n.indexOf(e)});var i=[];n.forEach(function(e,n){var r=t.options(e,a);i.push({name:e,options:r,disabled:!(n<=0)})}),this.setState({variants:a,type:n,selects:i,filter:a,product:{price:this.props.price,offer:this.props.offer,payment:this.props.payment,images:this.props.images,availabled:this.props.availabled,saleable:this.props.saleable}})}},{key:\"componentWillMount\",value:function(){var e=this;a.default.get(\"/web_api/variants/?product_id=\"+this.props.id).then(function(e){return e.data}).then(function(t){return e.init(t)})}},{key:\"options\",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.variants).map(function(e){return e.skus}),a=t,n=[];return a.forEach(function(e){n=n.concat(e)}),a=n,a=a.filter(function(t){return t.type==e}).map(function(e){return e.value}),n=a,a=a.filter(function(e,t){return t==n.indexOf(e)}).map(function(e){var a=\"\";return t.forEach(function(t){var n=t.filter(function(t){return t.value==e&&t.image});n.length&&(a=n[0].image.replace(\"http:\",\"\"))}),{value:e,label:e,image:a,disabled:!1,selected:!1}}),\"close\"==this.props.type?[].concat([{value:\"\",label:\"Selecione\",selected:!0,image:\"\"}],a):a}},{key:\"filter\",value:function(e){var t=this.state.variants;return e.forEach(function(e){t=t.filter(function(t){return t.skus.filter(function(t){return t.type==e.type&&t.value==e.value}).length>0})}),t}},{key:\"change\",value:function(e,t){var a=this.state.selects,n=this.state.selected,r=this.state.selects.length-1,i=n.filter(function(t){return t.type==a[e].name}),l=[],s=this.state.product.price,o=this.state.product.offer,u=this.state.product.payment,c=this.state.product.images,p=this.state.product.availabled,f=this.state.product.saleable;if(this.props.resetBuy(),a.forEach(function(a,n){e==n?a.options.filter(function(e){return e.value==t?e.selected=!0:e.selected=!1,!0}):n>e&&(a.disabled=!0,a.options.filter(function(e){return\"\"==e.value?e.selected=!0:e.selected=!1,!0}))}),e+1<=r&&(n=n.slice(e,r)),i.length?n=n.map(function(n){return n.type==a[e].name?{type:a[e].name,value:t}:{type:n.type,value:n.value}}):n.push({type:a[e].name,value:t}),\"\"==t)e+1<=r&&(this.props.setSku({}),p=!1,a[e+1].disabled=!0,a[e+1].options.forEach(function(e,t){e.selected=0==t}));else if(e+1<=r){var d=this.filter(n);a[e+1].disabled=!1,a[e+1].options=this.options(a[e+1].name,d)}n.length==this.state.type.length&&(l=this.filter(n)).length&&(s=parseFloat(l[0].price),o=parseFloat(l[0].offer),u=l[0].payment,c=l[0].images,p=l[0].availabled,f=!0,this.props.setSku(l[0])),u=u||\"\",this.props.setAttributes(s,o,u,c,p,f),this.setState({selects:a,selected:n,filter:l})}},{key:\"render\",value:function(){var t=this,a=this.state.variants,n=this.state.selects;return a.length?\"close\"==this.props.type?e.default.createElement(\"div\",{className:\"variants variants--close\"},n.map(function(a,n){return e.default.createElement(\"div\",{key:n,className:a.disabled?\"disabled variant\":\"variant\"},e.default.createElement(\"label\",{htmlFor:\"variant-\"+n},a.name),e.default.createElement(\"select\",{disabled:a.disabled,value:a.options.filter(function(e){return e.selected})[0].value,onChange:function(e){t.change(n,e.target.value)},name:\"variant-\"+n,id:\"variant-\"+n},a.options.map(function(t,a){return e.default.createElement(\"option\",{disabled:t.disabled,key:a+1,value:t.value},t.label)})))})):\"radio\"==this.props.type?e.default.createElement(\"div\",{className:\"variants variants--radio\"},n.map(function(a,n){return e.default.createElement(\"div\",{key:n,className:a.disabled?\"disabled\":\"\"},e.default.createElement(\"h3\",{className:\"variant__title\"},a.name),e.default.createElement(\"div\",{className:\"variant\",\"aria-disabled\":a.disabled},a.options.map(function(a,r){return e.default.createElement(\"label\",{key:\"label-\"+n+\"-\"+r,className:\"variant__item\",\"aria-disabled\":a.disabled},e.default.createElement(\"input\",{className:\"variant__radio\",type:\"radio\",onChange:function(e){t.change(n,e.target.value)},name:\"variant[\"+n+\"]\",disabled:a.disabled,checked:a.selected,key:r+1,value:a.value}),a.image?e.default.createElement(\"span\",{className:\"variant__label variant__label--image\"},e.default.createElement(\"img\",{src:a.image,alt:a.label})):e.default.createElement(\"span\",{className:\"variant__label\"},a.label))})))})):e.default.createElement(\"div\",{className:\"variants variants--open\"},n.map(function(a,n){return e.default.createElement(\"div\",{key:n,className:a.disabled?\"disabled\":\"\"},e.default.createElement(\"h3\",{className:\"variant__title\"},a.name),e.default.createElement(\"div\",{className:\"variant\",\"aria-disabled\":a.disabled},a.options.map(function(a,r){return e.default.createElement(\"label\",{key:\"label-\"+n+\"-\"+r,className:\"variant__item\",\"aria-disabled\":a.disabled},e.default.createElement(\"input\",{className:\"variant__radio\",type:\"radio\",onChange:function(e){t.change(n,e.target.value)},name:\"variant[\"+n+\"]\",disabled:a.disabled,checked:a.selected,key:r+1,value:a.value}),a.image?e.default.createElement(\"span\",{className:\"variant__label variant__label--image \"},e.default.createElement(\"img\",{src:a.image,alt:a.label})):e.default.createElement(\"span\",{className:\"variant__label\"},a.label))})))})):e.default.createElement(\"div\",{className:\"variants\"})}}]),n}();b.propTypes={};var h=function(e){return{}},y=function(e){return{setAttributes:function(t,a,r,i,l,s){return e((0,n.quickviewAttributes)(t,a,r,i,l,s))},setSku:function(t){return e((0,n.quickviewSetSkuSelected)(t))},resetBuy:function(){return e((0,n.resetBuy)())}}},g=(0,t.connect)(h,y)(b);exports.default=g;"},"sourceMaps":null,"error":null,"hash":"6e0ab9ecadd51f091969231e437db6b4","cacheData":{"env":{}}}